{% extends 'base.html' %}

{% block title %}PACK MANAGER{% endblock %}

{% block content %}

    <div>Core Packing List</div>    
    <p>This items will be automatically be added to all trip packing lists.</p>
    <form id='new-item' method='POST'>
        Item Category: 
        <select id='item-category' name='category'>
            <option value="" disabled selected>Choose One</option>
            {% for category in categories %}
            <option value='{{ category[0] }}'>{{ category[0] }}</option>
            {% endfor %}
        </select>
        Item Description: <input type='text' id='item-description' name='description'>
        <input type="Submit" value='Add Item'>
    </form>

    <h3 id='item-list'> Your List: </h3>

    <form action='/user_landing'>
        <input type='submit' value='Core list finished!'>
    </form>

    <script src='https://code.jquery.com/jquery.js'></script>
    <script src='/static/js/location.js' type='text/javascript'></script>
    
    <script> 
    function addItem(evt) {
        evt.preventDefault();

        var formInputs = {
            "category": $('#item-category').val(),
            "description": $('#item-description').val()
        };

        $.post("/core_list", formInputs);
        $("#item-list").after('<p>['+formInputs['category']+'] '+formInputs['description']+'</p>');
        $("#item-description").val("");
    }

    $('#new-item').on('submit', addItem);
    </script>

{% endblock %}